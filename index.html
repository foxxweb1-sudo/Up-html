<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>مستضيف التطبيقات الذكي 3D</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Three.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<!-- FontAwesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
body,html{
    margin:0;
    font-family:'Cairo',sans-serif;
    background:#020617;
    color:white;
}
#canvas-container{
    position:fixed;
    inset:0;
    z-index:-1;
}
.glass{
    background:rgba(15,23,42,.6);
    backdrop-filter:blur(12px);
    border:1px solid rgba(255,255,255,.1);
}
.code-editor{
    background:black;
    color:#10b981;
    font-family:monospace;
    direction:ltr;
}
</style>
</head>

<body>

<div id="canvas-container"></div>

<div class="relative z-10 min-h-screen">

<header class="text-center py-10">
<h1 class="text-4xl md:text-6xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">
انشر تطبيقك في ثواني
</h1>
<p class="text-gray-400 mt-3">ارفع index.html أو اكتب كودك وخد الرابط فورًا</p>
</header>

<main class="container mx-auto px-4 max-w-4xl">
<section class="glass p-6 rounded-3xl shadow-2xl">

<h2 class="text-xl font-bold mb-4 flex items-center gap-2">
<i class="fa-solid fa-code text-cyan-400"></i>
محرر الأكواد
</h2>

<input id="appTitle" placeholder="عنوان التطبيق" 
class="w-full mb-3 p-3 rounded-lg bg-black/40 outline-none">

<input type="file" id="fileInput" accept=".html"
class="w-full mb-3 text-sm text-gray-300">

<textarea id="htmlCode" spellcheck="false"
class="code-editor w-full h-72 p-4 rounded-xl outline-none resize-none mb-4"
placeholder="<html>
<body>
<h1>Hello World</h1>
</body>
</html>"></textarea>

<button id="publishBtn"
class="w-full bg-gradient-to-r from-cyan-500 to-blue-600 py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
نشر وتوليد الرابط <i class="fa-solid fa-paper-plane"></i>
</button>

<div id="resultArea" class="hidden mt-6 p-4 rounded-xl bg-green-500/10 border border-green-500/20">
<p class="text-green-400 mb-2">تم إنشاء الرابط بنجاح:</p>
<div class="flex gap-2">
<input id="finalLink" readonly
class="flex-1 p-2 text-xs bg-black/60 rounded outline-none">
<button onclick="copyLink()"
class="bg-green-600 px-4 rounded font-bold text-xs">نسخ</button>
</div>
</div>

</section>
</main>

<footer class="text-center py-10 text-gray-500">
جميع التطبيقات تعمل بدون سيرفر
</footer>

</div>

<!-- THREE BACKGROUND -->
<script>
let scene,camera,renderer,stars;
scene=new THREE.Scene();
camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,1,1000);
camera.position.z=1;
camera.rotation.x=Math.PI/2;

renderer=new THREE.WebGLRenderer({alpha:true});
renderer.setSize(innerWidth,innerHeight);
document.getElementById("canvas-container").appendChild(renderer.domElement);

const geo=new THREE.BufferGeometry();
const pos=[];
for(let i=0;i<8000;i++){
pos.push(Math.random()*600-300,Math.random()*600-300,Math.random()*600-300);
}
geo.setAttribute("position",new THREE.Float32BufferAttribute(pos,3));
stars=new THREE.Points(geo,new THREE.PointsMaterial({color:0xffffff,size:.6}));
scene.add(stars);

function animate(){
stars.rotation.y+=0.001;
renderer.render(scene,camera);
requestAnimationFrame(animate);
}
animate();

addEventListener("resize",()=>{
camera.aspect=innerWidth/innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(innerWidth,innerHeight);
});
</script>

<!-- LOGIC -->
<script>
function generateLiveLink(html){
const encoded=btoa(unescape(encodeURIComponent(html)));
return `data:text/html;base64,${encoded}`;
}

document.getElementById("publishBtn").onclick=()=>{
const code=document.getElementById("htmlCode").value;
if(!code.trim()){
alert("اكتب كود أو ارفع ملف HTML");
return;
}
const link=generateLiveLink(code);
document.getElementById("resultArea").classList.remove("hidden");
document.getElementById("finalLink").value=link;
};

document.getElementById("fileInput").addEventListener("change",e=>{
const file=e.target.files[0];
if(!file)return;
if(!file.name.endsWith(".html")){
alert("ارفع ملف HTML فقط");
return;
}
const reader=new FileReader();
reader.onload=ev=>{
document.getElementById("htmlCode").value=ev.target.result;
};
reader.readAsText(file);
});

function copyLink(){
const input=document.getElementById("finalLink");
input.select();
document.execCommand("copy");
alert("تم نسخ الرابط");
}
</script>

</body>
</html>
