<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>HTML2App | Ø­ÙˆÙ‘Ù„ HTML Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ Ø«ÙˆØ§Ù†ÙŠ</title>
<meta name="description" content="Ø­ÙˆÙ‘Ù„ Ø£ÙŠ Ù…Ù„Ù HTML Ø¥Ù„Ù‰ ØªØ·Ø¨ÙŠÙ‚ ÙˆØ±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ùˆ APK Ø¨Ø³Ù‡ÙˆÙ„Ø©.">
<meta name="theme-color" content="#06b6d4">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Three.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<!-- QR -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
body{font-family:'Cairo',sans-serif;background:#020617;color:#fff}
#bg{position:fixed;inset:0;z-index:-1}
.glass{background:rgba(15,23,42,.6);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.1)}
textarea{background:#000;color:#10b981;font-family:monospace;direction:ltr}
</style>

<!-- Manifest (inline) -->
<link rel="manifest" href='data:application/json,{
"name":"HTML2App",
"short_name":"HTML2App",
"start_url":".",
"display":"standalone",
"background_color":"#020617",
"theme_color":"#06b6d4",
"icons":[
{"src":"https://cdn-icons-png.flaticon.com/512/919/919827.png","sizes":"512x512","type":"image/png"}
]
}'>
</head>

<body>

<div id="bg"></div>

<div class="container mx-auto max-w-4xl px-4 py-10 relative z-10">

<h1 class="text-4xl md:text-6xl font-bold text-center bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">
HTML2App
</h1>
<p class="text-center text-gray-400 mt-3">
Ø­ÙˆÙ‘Ù„ Ø£ÙŠ HTML Ù„ØªØ·Ø¨ÙŠÙ‚ + Ø±Ø§Ø¨Ø· + APK
</p>

<div class="glass p-6 rounded-3xl mt-8">

<input id="title" placeholder="Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"
class="w-full p-3 mb-3 rounded bg-black/50">

<input type="file" id="file" accept=".html" class="mb-3">

<textarea id="code" rows="10" class="w-full p-4 rounded mb-4"
placeholder="<h1>Hello App</h1>"></textarea>

<button onclick="publish()"
class="w-full bg-cyan-600 py-3 rounded font-bold">
Ù†Ø´Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
</button>

<div id="result" class="hidden mt-6">
<input id="link" readonly
class="w-full p-2 bg-black rounded text-xs mb-3">

<div class="flex gap-2 mb-3">
<button onclick="copyLink()" class="bg-green-600 px-4 py-2 rounded">
<i class="fa fa-copy"></i> Ù†Ø³Ø®
</button>
<button onclick="shareLink()" class="bg-blue-600 px-4 py-2 rounded">
<i class="fa fa-share"></i> Ù…Ø´Ø§Ø±ÙƒØ©
</button>
</div>

<div id="qr" class="flex justify-center"></div>

<iframe id="preview"
class="w-full h-64 mt-4 rounded bg-black"></iframe>
</div>

</div>

<h2 class="text-xl mt-10 mb-4">ğŸ“‚ ØªØ·Ø¨ÙŠÙ‚Ø§ØªÙƒ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</h2>
<div id="apps" class="space-y-3"></div>

</div>

<script>
/* ====== 3D Background ====== */
let s=new THREE.Scene();
let c=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,1,1000);
c.position.z=1;c.rotation.x=Math.PI/2;
let r=new THREE.WebGLRenderer({alpha:true});
r.setSize(innerWidth,innerHeight);
bg.appendChild(r.domElement);

let g=new THREE.BufferGeometry(),p=[];
for(let i=0;i<6000;i++)
p.push(Math.random()*600-300,Math.random()*600-300,Math.random()*600-300);
g.setAttribute("position",new THREE.Float32BufferAttribute(p,3));
let stars=new THREE.Points(g,new THREE.PointsMaterial({color:0xffffff,size:.6}));
s.add(stars);

(function anim(){
stars.rotation.y+=.001;
r.render(s,c);
requestAnimationFrame(anim);
})();

/* ====== File Upload ====== */
file.onchange=e=>{
let f=e.target.files[0];
if(!f)return;
let rd=new FileReader();
rd.onload=ev=>code.value=ev.target.result;
rd.readAsText(f);
};

/* ====== Core Logic ====== */
function gen(html){
return "data:text/html;base64,"+btoa(unescape(encodeURIComponent(html)));
}

function publish(){
if(!code.value.trim())return alert("Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ Ø£Ùˆ Ø§Ø±ÙØ¹ Ù…Ù„Ù HTML");
let l=gen(code.value);
link.value=l;
preview.src=l;
result.classList.remove("hidden");
qr.innerHTML="";
new QRCode(qr,{text:l,width:150,height:150});
saveApp();
loadApps();
}

/* ====== Save Apps ====== */
function saveApp(){
let arr=JSON.parse(localStorage.apps||"[]");
arr.unshift({
title:title.value||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…",
link:link.value,
date:new Date().toLocaleString()
});
localStorage.apps=JSON.stringify(arr);
}

function loadApps(){
apps.innerHTML="";
(JSON.parse(localStorage.apps||"[]")).forEach(a=>{
apps.innerHTML+=`
<div class="glass p-3 rounded flex justify-between items-center">
<div>
<p class="font-bold">${a.title}</p>
<p class="text-xs text-gray-400">${a.date}</p>
</div>
<button onclick="window.open('${a.link}')"
class="bg-cyan-600 px-3 py-1 rounded text-xs">ÙØªØ­</button>
</div>`;
});
}
loadApps();

/* ====== Actions ====== */
function copyLink(){
link.select();
document.execCommand("copy");
alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·");
}

function shareLink(){
if(navigator.share)
navigator.share({title:"HTML2App",url:link.value});
}

/* ====== Service Worker (inline) ====== */
if("serviceWorker" in navigator){
const swCode=`
self.addEventListener('install',e=>{
e.waitUntil(caches.open('html2app').then(c=>c.addAll(['./'])))
});
self.addEventListener('fetch',e=>{
e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)))
});
`;
const blob=new Blob([swCode],{type:"text/javascript"});
navigator.serviceWorker.register(URL.createObjectURL(blob));
}
</script>

</body>
</html>
